<!-- customer_page.html -->
{% extends 'base.html' %}

{% block title %}Customer Page{% endblock %}

{% block content %}
    <div class="container">
        <div class="row justify-content-center mt-5">
            <div class="col-md-6">
                <h1 class="text-center mb-4">Customer Page</h1>

                <!-- Patient Action Selection Bar -->
                <nav class="patient-action-bar">
                    <h2>Select Action</h2>
                    <form action="{% url 'customer_page' %}" method="post">
                        {% csrf_token %}
                        <!-- Add your action selection fields here -->
                        <label for="patient_action">Select Action:</label>
                        <select name="patient_action" id="patient_action" required>
                            <option value="add_patient">Add Patient</option>
                            <option value="select_patient">Select Patient</option>
                        </select>

                        <!-- Additional fields based on the selected action will be added dynamically using JavaScript -->
                        <div id="additional-fields"></div>

                        <button type="submit">Go</button>
                    </form>
                </nav>

                <!-- Main content section -->
                <main id="patient-action-form-section">
                    <!-- The selected action's form will be dynamically inserted here using JavaScript -->
                </main>
            </div>
        </div>
    </div>

    <script>
        // Add your JavaScript for dynamically changing form fields based on selected action here
        const patientActionBar = document.querySelector('.patient-action-bar');
        const additionalFieldsContainer = document.getElementById('additional-fields');

        patientActionBar.addEventListener('change', () => {
            const selectedAction = document.getElementById('patient_action').value;
            let formFields = '';

            if (selectedAction === 'add_patient') {
                // Add the fields for adding a patient
                formFields = `
                    <div class="form-group">
                        <label for="first_name">First Name:</label>
                        <input type="text" class="form-control" id="first_name" name="first_name" required>
                    </div>
                    <div class="form-group">
                        <label for="last_name">Last Name:</label>
                        <input type="text" class="form-control" id="last_name" name="last_name" required>
                    </div>
                    <div class="form-group">
                        <label for="phone_number">Phone Number:</label>
                        <input type="text" class="form-control" id="phone_number" name="phone_number" required>
                    </div>
                    <div class="form-group">
                        <label for="birth_date">Birth Date:</label>
                        <input type="date" class="form-control" id="birth_date" name="birth_date" required>
                    </div>
                    <div class="form-group">
                        <label for="national_code">National Code:</label>
                        <input type="text" class="form-control" id="national_code" name="national_code" required>
                    </div>
                    <div class="form-group">
                        <label for="email">Email:</label>
                        <input type="email" class="form-control" id="email" name="email">
                    </div>
                    <!-- Add other fields as needed -->
                `;
            } else if (selectedAction === 'select_patient') {
                // Add the fields for selecting a patient
                formFields = `
                    <div class="form-group">
                        <label for="select_patient">Select Patient:</label>
                        <select name="select_patient" id="select_patient">
                            <option value="current_user">Current User</option>
                            <option value="another_user">Another User</option>
                        </select>
                    </div>
                `;

                if (document.getElementById('select_patient').value === 'another_user') {
                    // If Another User is selected, add an additional field for entering the phone number
                    formFields += `
                        <div class="form-group">
                            <label for="phone_number">Enter Patient's Phone Number:</label>
                            <input type="text" class="form-control" id="phone_number" name="phone_number" required>
                        </div>
                    `;
                }
            }

            // Insert the dynamically generated form fields
            additionalFieldsContainer.innerHTML = formFields;
        });
    </script>
{% endblock %}
